#:kivy 1.0.9

<TabbedScreen>:
	# canvas.before:
	# 	Color:
	# 		rgba: 0.9,0.2, 0.4, 1
	# 	Rectangle:
	# 		pos: self.pos
	# 		size: self.size
	TabbedPanel:
		id: tabPanel
		do_default_tab: False
		padding: 5
		canvas.before:
			Color:
				rgba: 0.8,0.8,0.8,1
			Rectangle:
				pos: self.pos
				size: self.size	
			# BorderImage
			# 	pos: self.x - 50, self.y - 50
			# 	size: self.width + 100, self.height + 100
			# 	source: 'borderimage.jpg'	

	# ******************Server Screen******************


		TabbedPanelItem:
			text: 'Server'
			id: serverTab
			BoxLayout:
				orientation: "vertical"
				size_hint: 1,1

				BoxLayout:
					orientation: "horizontal"
					size_hint: 1,0.3
					padding: 10
					canvas.before:
						Color:
							rgba: 0.9,0.9,0.9,1
						Rectangle:
							pos: self.pos
							size: self.size
					BoxLayout:
						orientation: 'vertical'
						size_hint_x: 0.7
						spacing: 5
						size_hint_y: 1
						# padding: 20

						BoxLayout:
							orientation: 'horizontal'
							size_hint_x: 1
							size_hint_y: 0.5

							Label:
								text: "IP: "
								size_hint: 0.3, 0.5
								canvas.before:
									Color:
										rgba: 0.5,0.5,0.5,1
									Rectangle:
										pos: self.pos
										size: self.size
							TextInput:
								size_hint: 0.7, 0.5
								multiline: False
								# size: 200,45
								id: serverIp
								font_size: 20
						BoxLayout:
							orientation: 'horizontal'
							size_hint_x: 1
							size_hint_y: 0.5
							spacing: 5

							Label:
								size_hint: 0.3, 0.5
								text:"Port: "
								canvas.before:
									Color:
										rgba:0.5,0.5,0.5,1
									Rectangle:
										pos: self.pos
										size: self.size

							TextInput:
								size_hint: 0.3, 0.5
								multiline: False
								# size: 200,45
								text: "4446"
								id: serverPort
								font_size: 20
							Button:
								size_hint: 0.4, 0.5
								text: "Connect"
								on_press: root.beginServerConn()
								id: serverConnectBtn
									
					BoxLayout:
						orientation: 'vertical'
						size_hint_x: 0.3
						size_hint_y: 1
					
						
						
				BoxLayout:
					orientation: "vertical"
					size_hint: 1,0.7
					# padding: 10
					spacing: 5
					# canvas.before:
					# 	Color:
					# 		rgba: 0.4,0.1, 0.4, 1
					# 	Rectangle:
					# 		pos: self.pos
					# 		size: self.size
					TextInput:
						size_hint: 1, 0.5
						multiline: True
						readonly: True
						text: "**********SERVER RUN**********"
						id: serverMessageBox
					BoxLayout:
						orientation: "horizontal"
						size_hint: 1,0.1
						# Button:
						# 	size_hint:0.1,1
						# 	id: "rewind_button"
						# 	# border: 30,30,30,30
						# 	background_normal: "icons/rewind.png"
						# 	background_down: "icons/forward.png"		
						# Button:
						# 	size_hint:0.1,1
						# 	id: "play_button"
						# 	# border: 30,30,30,30
						# 	background_normal: "icons/play.png"
						# 	background_down: "icons/pause.png"
						# 	on_press: root.changeScreen()
						# Button:
						# 	size_hint:0.1,1
						# 	id: "pause_button"
						# 	# border: 30,30,30,30
						# 	background_normal: "icons/pause.png"
						# 	background_down: "icons/play.png"
						# Button:
						# 	size_hint:0.1,1
						# 	id: "forward_button"
						# 	# border: 30,30,30,30
						# 	background_normal: "icons/forward.png"
						# 	background_down: "icons/rewind.png"
						BoxLayout:
							orientation:"vertical"
							size_hint: 0.3,1
						Button:
							id: mediaSwitchAtServer
							border: 0,20,20,20
							size_hint:0.4,1
							text:"MEDIA PLAYER"
							disabled: True
							on_press: root.changeScreen()
						BoxLayout:
							orientation:"vertical"
							size_hint: 0.3,1

		# ******************Client Screen******************

		TabbedPanelItem:
			text: "Client"							
			BoxLayout:
				orientation: "vertical"
				size_hint: 1,1

				BoxLayout:
					orientation: "horizontal"
					size_hint: 1,0.3
					padding: 10
					canvas.before:
						Color:
							rgba: 0.9,0.9,0.9,1
						Rectangle:
							pos: self.pos
							size: self.size
					BoxLayout:
						orientation: 'vertical'
						size_hint_x: 0.7
						size_hint_y: 1
						# padding: 20
						spacing: 5


						BoxLayout:
							orientation: 'horizontal'
							size_hint_x: 1
							size_hint_y: 0.5

							Label:
								text: "IP: "
								size_hint: 0.3, 0.5
								canvas.before:
									Color:
										rgba: 0.5,0.5,0.5,1
									Rectangle:
										pos: self.pos
										size: self.size
							TextInput:
								size_hint: 0.7, 0.5
								multiline: False
								# size: 200,45
								id: clientIp
								font_size: 20
						BoxLayout:
							orientation: 'horizontal'
							size_hint_x: 1
							size_hint_y: 0.5
							spacing: 5

							Label:
								size_hint: 0.3, 0.5
								text:"Port: "
								canvas.before:
									Color:
										rgba: 0.5,0.5,0.5,1
									Rectangle:
										pos: self.pos
										size: self.size
							TextInput:
								size_hint: 0.3, 0.5
								multiline: False
								# size: 200,45
								id: clientPort
								text: '4446'
								font_size: 20
							Button:
								size_hint: 0.4, 0.5
								text: "Start Listening"
								id: listenClientBtn
								on_press: root.beginClientConn()
					BoxLayout:
						orientation: 'vertical'
						size_hint_x: 0.3
						size_hint_y: 1

				BoxLayout:
					orientation: "vertical"
					size_hint: 1,0.5
					# padding: 10
					spacing: 5
					# canvas.before:
					# 	Color:
					# 		rgba: 0.4,0.1, 0.4, 1
					# 	Rectangle:
					# 		pos: self.pos
					# 		size: self.size
					TextInput:
						size_hint: 1, 0.5
						multiline: True
						readonly: True
						text: "**********CLIENT RUN**********"
						id: clientMessageBox
					# BoxLayout:
					# 	orientation: "horizontal"
					# 	size_hint: 1,0.1
				BoxLayout:
					orientation: 'vertical'
					size_hint: 1,0.2

					BoxLayout:
						orientation: 'horizontal'
						# pos:0,50
						# size: root.width, 50
						size_hint: 1, 0.5
						Button:
							text: '<--'
							id: prevBut
							background_color: 0,.5,1,1
							on_press: root.prevSongAtClient()
							size_hint:0.34,1
							disabled: True
						Button:
							text: '[\'_\']'
							id: pauseBut
							background_color: 0,.5,1,1
							size_hint:0.33,1
							on_press: root.pauseSongAtClient()
							disabled: True
						Button:
							text: '-->'
							id: nextBut
							size_hint:0.34,1
							background_color: 0,.5,1,1
							on_press: root.nextSongAtClient()
							disabled: True
					BoxLayout:
						orientation: 'horizontal'
						# pos:0,0
						# size: root.width, 50
						size_hint: 1, 0.5		
						Button:
							id: nowplayingStatus
							text: 'No Connection'
							# pos: 0,0
							# size: root.width, 50
							background_color: 0,.5,1,1
							size_hint: 1,1


# Musicplayer gui : https://github.com/JasonHinds13/KVMusicPlayer

<MusicPlayer>:
	canvas:
		Color:
			rgba: 0, 0, .1, 1
			# rgba:self.color
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		orientation: "vertical"
		size: root.width,root.height
		id: rootBox	
		BoxLayout:
			orientation: "horizontal"
			pos: 0,root.top-35
			size: root.width,35
			canvas:
				Color:
					rgba: 1, 0, .1, 1
					# rgba:self.color
				Rectangle:
					pos: self.pos
					size: self.size		
			Button:
				id: backButton
				# pos: 0,root.top-35
				# size: 100, 35
				size_hint: 0.2,1
				background_color: 0,.5,1,1
				text: "Back"
				on_release: root.changeScreen()

			TextInput:
				id: direct
				# pos: 100,root.top-35
				# size: root.width-300,35
				size_hint: 0.6,1
				hint_text: 'Enter File Location or Leave Empty to Browse'
			Button:
				id: searchBtn
				text: 'Browse'
				# size: 200,35
				background_color: 0,.5,1,1
				# pos: root.width-200, root.top-35
				on_release: root.getSongs()
				size_hint: 0.2,1


		ScrollView:
			size_hint: None, None
			size: root.width, root.height-135
			pos: 0, 100
			GridLayout:
				id: scroll
				cols: 2
				spacing: 10
				size_hint_y: None
				row_force_default: True
				row_default_height: 40
			

		# GridLayout:
		# 	rows: 1
		# 	pos: 0, 50
		# 	size: root.width, 50
		BoxLayout:
			orientation: 'horizontal'
			pos:0,50
			size: root.width, 50
			Button:
				text: '<--'
				background_color: 0,.5,1,1
				on_press: root.prevSong()
				size_hint:0.34,1
			Button:
				text:  '[\'_\']'
				id: pauseButtonatServer
				background_color: 0,.5,1,1
				size_hint:0.34,1
				on_press: root.pauseSong()
			Button:
				text: '-->'
				size_hint:0.34,1
				background_color: 0,.5,1,1
				on_press: root.nextSong()
		BoxLayout:
			orientation: 'horizontal'
			pos:0,0
			size: root.width, 50		
			Button:
				id: nowplay
				text: 'Now Playing'
				# pos: 0,0
				# size: root.width, 50
				background_color: 0,.5,1,1
				size_hint: 1,1

	Label:
		id: status
		text: ''
		center: root.center

<ChooseFile>:

	canvas.before:
		Color:
			rgba: 0, 0, .4, 1
		Rectangle:
			pos: self.pos
			size: self.size
	BoxLayout:
		size: root.size
		pos: root.pos
		orientation: "vertical"
		FileChooserIconView:
			id: filechooser

		BoxLayout:
			size_hint_y: None
			height: 30
			Button:
				text: "Cancel"
				background_color: 0,.5,1,1
				on_release: root.cancel()

			Button:
				text: "Select Folder"
				background_color: 0,.5,1,1
				on_release: root.select(filechooser.path)							

					
								
								
